<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="<: uri_for('/static/css/index.css') :>" />
    <title>MetaKGS - Unofficial JSON API for KGS Go Server</title>
    <script src="<: uri_for('/static/js/highlight.pack.js') :>"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>

    <header>
      <img src="<: uri_for('/static/img/zoo.jpg') :>" width="700">
      <h1>MetaKGS <small>Unofficial JSON API for KGS Go Server</small></h1>
    </header>

    <nav>
       <ul>
         <li><a href="#version">Version</a></li>
         <li><a href="#changes">Changes</a></li>
         <li>
           <a href="#description">Description</a>
           <ul>
             <li>
               <a href="#methods">Methods</a>
               <ul>
                 <li><a href="#get-api-archives-user">GET /api/archives/:user</a></li>
                 <li><a href="#get-api-archives-user-year-month">GET /api/archives/:user/:year/:month</a></li>
                 <li><a href="#get-api-top100">GET /api/top100</a></li>
                 <li><a href="#get-api-tournaments">GET /api/tournaments</a></li>
                 <li><a href="#get-api-tournaments-year">GET /api/tournaments/:year</a></li>
                 <li><a href="#get-api-tournament-id">GET /api/tournament/:id</a></li>
                 <li><a href="#get-api-tournament-id-entrants">GET /api/tournament/:id/entrants</a></li>
                 <li><a href="#get-api-tournament-id-round-round">GET /api/tournament/:id/round/:round</a></li>
               </ul>
             </li>
           </ul>
         </li>
         <li><a href="#see-also">See Also</a></li>
         <li><a href="#acknowledgement">Acknowledgement</a></li>
         <li><a href="#author">Author</a></li>
       </ul>
    </nav>

    <h2 id="version">Version</h2>

    <p>This documentation refers to API version 0.01.</p>

    <h2 id="changes">Changes</h2>

    <dl>
      <dt>0.01 Aug 11th, 2014</dt>
      <dd>
        <ul>
          <li>initial version</li>
        </ul>
      </dd>
    </dl>

    <h2 id="description">Description</h2>

    <p>TBD</p>

    <h3 id="methods">Methods</h3>

    <h4 id="get-api-archives-user">GET /api/archives/:user</h4>
    <h4 id="get-api-archives-user-year-month">GET /api/archives/:user/:year/:month</h4>

    <p>Returns a list of games played by the specified <code>:user</code>.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/gameArchives.jsp?user=foo&amp;year=2014&amp;month=8&amp;oldAccounts=y",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "games": [
            {
                "sgf_url": "http://files.gokgs.com/games/2014/8/10/foo-bar.sgf",
                "white": [
                    {
                        "name": "foo",
                        "rank": "3d",
                        "archives_url": "http://metakgs.org/api/archives/foo"
                    }
                ],
                "black": [
                    {
                        "name": "bar",
                        "rank": "1d",
                        "archives_url": "http://metakgs.org/api/archives/bar"
                    }
                ],
                "board_size": 19,
                "handicap": 2,
                "started_at": "2014-08-10T12:34Z",
                "type": "Ranked",
                "result": "B+Resign"
            },
            ...
        ],
        "zip_url": "http://www.gokgs.com/servlet/archives/en_US/foo-2014-8.zip",
        "tgz_url": "http://www.gokgs.com/servlet/archives/en_US/foo-2014-8.tar.gz"
    }
}</code>
    </pre>

    <h5>202 Accepted</h5>

    <p>If the size of the requested resource on KGS is greater than 100KB,
    then <code>202</code> is returned since the MetaKGS server can not parse
    such a large HTML document immediately.</p>

<pre>
Retry-After: Tue, 12 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "Accepted",
    "queued": false,
    "working": true,
    "retry_after": "2014-08-12T12:34:56Z"
}</code>
</pre>

    <h4 id="get-api-top100">GET /api/top100</h4>

    <p>Retruns a list of top 100 players. This resource is updated once a day.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/top100.jsp",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "players": [
            {
                "position": 1,
                "name": "foo",
                "rank": "9d",
                "archives_url": "http://metakgs.org/api/archives/foo"
            },
            {
                "position": 2,
                "name": "bar",
                "rank": "9d",
                "archives_url": "http://metakgs.org/api/archives/bar"
            },
            ...
            {
                "position": 100,
                "name": "baz",
                "rank": "6d",
                "archives_url": "http://metakgs.org/api/archives/baz"
            }
        ]
    }
}</code>
    </pre>

    <h4 id="get-api-tournaments">GET /api/tournaments</h4>
    <h4 id="get-api-tournaments-year">GET /api/tournaments/:year</h4>

    <p>Returns a list of tournaments held in the specified <code>:year</code>.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/tournList.jsp?year=2012",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "tournaments": [
            {
                "id": 762,
                "name": "KGS Meijin Qualifier October 2012", 
                "url": "http://metakgs.org/api/tournament/762"
            },
            ...
        ]
    }
}</code>
    </pre>

    <h5>404 Not Found</h5>

<pre>
<code class="json">{
    "message": "Not Found",
    "request_url": "http://www.gokgs.com/tournList.jsp?year=1999",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": null
}</code>
</pre>

    <h5>502 Bad Gateway</h5>

    <h4 id="get-api-tournament-id">GET /api/tournament/:id</h4>

    <p>Returns information for the tournament identified by <code>:id</code>.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/tournInfo.jsp?id=762",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "id": 762,
        "name": "KGS Meijin Qualifier October 2012", 
        "description": "Welcome to the KGS Meijin October Qualifier! ...",
        "entrants_url": "http://metakgs.org/api/tournament/762/entrants",
        "rounds": [
            {
                "round": 1,
                "start_at": "2012-10-27T16:05Z",
                "end_at": "2012-10-27T18:35Z",
                "url": "http://metakgs.org/api/tournament/762/round/1"
            },
            ...
        ]
    }
}</code>
    </pre>

    <p><code>"description"</code> is
    <a href="http://daringfireball.net/projects/markdown/">Markdown</a>-formatted.</p>

    <h5>404 Not Found</h5>

<pre>
<code class="json">{
    "message": "Not Found",
    "request_url": "http://www.gokgs.com/tournInfo.jsp?id=12345",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": null
}</code>
</pre>

    <h4 id="get-api-tournament-id-entrants">GET /api/tournament/:id/entrants</h4>

    <p>Returns a list of the tournament entrants associated with the given
    tournament <code>:id</code>.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/tournEntrants.jsp?id=762&amp;sort=s",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "id": 762,
        "name": "KGS Meijin Qualifier October 2012", 
        "entrants": [
            {
                "position": null,
                "name": "foo",
                "rank": "5d",
                "score": null,
                "sos": null,
                "sodos": null,
                "notes": "Winner",
                "archives_url": "http://metakgs.org/api/archives/foo"
            },
            ...
        ],
        "entrants_url": "http://metakgs.org/api/tournament/762/entrants",
        "rounds": [
            {
                "round": 1,
                "start_at": "2012-10-27T16:05Z",
                "end_at": "2012-10-27T18:35Z",
                "url": "http://metakgs.org/api/tournament/762/round/1"
            },
            ...
        ]
    }
}</code>
    </pre>

    <h5>404 Not Found</h5>

<pre>
<code class="json">{
    "message": "Not Found",
    "request_url": "http://www.gokgs.com/tournEntrants.jsp?id=12345&amp;sort=s",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": null
}</code>
</pre>

    <h4 id="get-api-tournament-id-round-round">GET /api/tournament/:id/round/:round</h4>

    <p>Returns a list of tournament games played in the specified <code>:round</code>.</p>

    <h5>200 OK</h5>

    <pre>
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Expires: Tue, 12 Aug 2014 12:34:56 GMT
Last-Modified: Mon, 11 Aug 2014 12:34:56 GMT

<code class="json">{
    "message": "OK",
    "request_url": "http://www.gokgs.com/tournGames.jsp?id=762&amp;round=1",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": {
        "id": 762,
        "round": 1,
        "name": "KGS Meijin Qualifier October 2012", 
        "games": [
            {
                "sgf_url": "http://files.gokgs.com/games/2012/10/27/foo-bar.sgf",
                "white": {
                    "name": "foo",
                    "rank": "3d",
                    "archives_url": "http://metakgs.org/api/archives/foo"
                },
                "black": {
                    "name": "bar",
                    "rank": "1d",
                    "archives_url": "http://metakgs.org/api/archives/bar"
                },
                "board_size": 19,
                "start_at": "2012-10-17T16:05Z",
                "result": "W+Resign"
            },
            ...
        ],
        "byes": [
            {
                "name": "baz",
                "rank": "2d",
                "type": "System",
                "archives_url": "http://metakgs.org/api/archives/baz"
            },
            ...
        ],
        "entrants_url": "http://metakgs.org/api/tournament/762/entrants",
        "rounds": [
            {
                "round": 1,
                "start_at": "2012-10-27T16:05Z",
                "end_at": "2012-10-27T18:35Z",
                "url": "http://metakgs.org/api/tournament/762/round/1"
            },
            ...
        ]
    }
}</code>
    </pre>

    <h5>404 Not Found</h5>

<pre>
<code class="json">{
    "message": "Not Found",
    "request_url": "http://www.gokgs.com/tournGames.jsp?id=12345&amp;round=1",
    "requested_at": "2014-08-11T12:34:56Z",
    "responded_at": "2014-08-11T12:34:56Z",
    "content": null
}</code>
</pre>

    <h2 id="see-also">See Also</h2>

    <ul>
      <li><a href="http://www.gokgs.com/">KGS Go Server</a></li>
      <li><a href="<: uri_for('/explorer') :>">MetaKGS Explorer</a></li>
      <li><a href="https://metacpan.org/pod/WWW::GoKGS">WWW::GoKGS</a> on CPAN</li>
      <li><a href="https://github.com/anazawa/metakgs.org">metakgs.org</a> on GitHub</li>
    </ul>

    <h2 id="acknowledgement">Acknowledgement</h2>

    <p>Thanks to wms, the author of KGS Go Sever, we can enjoy playing go
    online for free.</p>

    <h2 id="author">Author</h2>

    <div class="profile">
    <img
 src="https://secure.gravatar.com/avatar/fab5371a46cc0befc9357bcc8237ebab?s=60"
      width="" height="">
    <h4>Ryo Anazawa</h4> <p>anazawa@metakgs.org</p></div>

  </body>
</html>
